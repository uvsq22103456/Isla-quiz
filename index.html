<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Islamique</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f7f6;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }
        #app-container {
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            max-width: 600px;
            width: 90%;
            text-align: center;
        }
        h1, h2 {
            color: #2c3e50;
        }
        
        /* Styles pour les boutons (Th√®mes et Options) */
        .btn {
            display: block;
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            background-color: #ecf0f1;
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }
        .btn:hover {
            background-color: #dcdde1;
        }
        
        /* Menu des th√®mes */
        #theme-menu .btn {
            background-color: #34495e;
            color: white;
            border: none;
        }
        #theme-menu .btn:hover {
            background-color: #2c3e50;
        }

        /* Section Quiz */
        #quiz-section { display: none; }
        
        #score-display {
            font-weight: bold;
            margin-bottom: 20px;
            color: #7f8c8d;
        }
        #question-text {
            font-size: 1.2em;
            margin-bottom: 20px;
            font-weight: bold;
        }
        
        .btn:disabled { cursor: not-allowed; opacity: 0.9; }
        .correct { background-color: #2ecc71 !important; color: white; border-color: #27ae60; }
        .incorrect { background-color: #e74c3c !important; color: white; border-color: #c0392b; }
        
        #feedback-section {
            display: none;
            margin-top: 20px;
            padding: 15px;
            background-color: #f1f2f6;
            border-left: 5px solid #2980b9;
            border-radius: 4px;
            text-align: left;
        }
        #source-text {
            font-style: italic;
            font-size: 0.95em;
            margin-top: 10px;
            color: #2c3e50;
        }
        #next-btn, #home-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #2980b9;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
        }
        #next-btn:hover, #home-btn:hover { background-color: #3498db; }
    </style>
</head>
<body>

    <div id="app-container">
        <h1>Quiz sur l'Islam</h1>
        
        <div id="theme-menu">
            <h2>Choisissez un th√®me</h2>
            <div id="theme-buttons"></div>
        </div>

        <div id="quiz-section">
            <h2 id="current-theme-title">Th√®me</h2>
            <div id="score-display">Score : 0 / 0</div>
            
            <div id="question-text">Chargement de la question...</div>
            <div id="options-container"></div>

            <div id="feedback-section">
                <strong id="feedback-title"></strong>
                <div id="source-text"></div>
                <button id="next-btn" onclick="nextQuestion()">Question suivante</button>
            </div>
            
            <button id="home-btn" style="display:none; width:100%;" onclick="retourAccueil()">Retour √† l'accueil</button>
        </div>
    </div>

    <script>
        // LA BASE DE DONN√âES CLASS√âE PAR TH√àMES
        const questionsDatabase = {
            "Le Coran": [
                {
                    "question": "Combien de sourates (chapitres) compte le Coran ?",
                    "choix": ["110", "112", "114", "120"],
                    "bonne_reponse": "114",
                    "source": "Consensus des savants (Ijma') sur la compilation du Mus'haf."
                },
                {
                    "question": "Quelle est la plus longue sourate du Coran ?",
                    "choix": ["Al-Imran", "An-Nisa", "Al-Baqarah", "Al-Ma'idah"],
                    "bonne_reponse": "Al-Baqarah",
                    "source": "Consensus : Elle contient 286 versets."
                }
            ],
            "La Vie du Proph√®te (Ô∑∫)": [
                {
                    "question": "Dans quelle ville est n√© le Proph√®te Muhammad (Ô∑∫) ?",
                    "choix": ["M√©dine", "La Mecque", "J√©rusalem", "Ta√´f"],
                    "bonne_reponse": "La Mecque",
                    "source": "Consensus historique et biographique (Sira)."
                },
                {
                    "question": "Quel √¢ge avait le Proph√®te (Ô∑∫) lorsqu'il a re√ßu la premi√®re r√©v√©lation ?",
                    "choix": ["33 ans", "40 ans", "50 ans", "63 ans"],
                    "bonne_reponse": "40 ans",
                    "source": "Hadith authentique : Sahih Al-Bukhari et biographie proph√©tique (Sira)."
                }
            ],
            "Les Piliers de l'Islam": [
                {
                    "question": "Combien y a-t-il de piliers en Islam ?",
                    "choix": ["3", "4", "5", "6"],
                    "bonne_reponse": "5",
                    "source": "Hadith authentique (Hadith de Jibril) : Sahih Muslim n¬∞8."
                }
            ]
        };

        // VARIABLES DU JEU
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;

        // ELEMENTS HTML
        const themeMenu = document.getElementById("theme-menu");
        const themeButtonsContainer = document.getElementById("theme-buttons");
        const quizSection = document.getElementById("quiz-section");
        const currentThemeTitle = document.getElementById("current-theme-title");
        const questionTextElement = document.getElementById("question-text");
        const optionsContainer = document.getElementById("options-container");
        const feedbackSection = document.getElementById("feedback-section");
        const feedbackTitle = document.getElementById("feedback-title");
        const sourceText = document.getElementById("source-text");
        const scoreDisplay = document.getElementById("score-display");
        const nextBtn = document.getElementById("next-btn");
        const homeBtn = document.getElementById("home-btn");

        // INITIALISATION DES BOUTONS DE TH√àMES
        function initThemes() {
            for (const theme in questionsDatabase) {
                const btn = document.createElement("button");
                btn.classList.add("btn");
                btn.innerText = theme + " (" + questionsDatabase[theme].length + " questions)";
                btn.onclick = () => lancerQuiz(theme);
                themeButtonsContainer.appendChild(btn);
            }
        }

        // LANCER UN QUIZ SELON LE TH√àME CHOISI
        function lancerQuiz(theme) {
            currentQuestions = questionsDatabase[theme];
            currentQuestionIndex = 0;
            score = 0;
            
            currentThemeTitle.innerText = "Th√®me : " + theme;
            themeMenu.style.display = "none";
            quizSection.style.display = "block";
            homeBtn.style.display = "none";
            
            loadQuestion();
        }

        // CHARGER UNE QUESTION
        function loadQuestion() {
            feedbackSection.style.display = "none";
            optionsContainer.innerHTML = "";
            nextBtn.style.display = "inline-block";
            
            const currentQuestion = currentQuestions[currentQuestionIndex];
            questionTextElement.innerText = currentQuestion.question;
            scoreDisplay.innerText = `Score : ${score} / ${currentQuestionIndex}`;

            currentQuestion.choix.forEach(choix => {
                const button = document.createElement("button");
                button.innerText = choix;
                button.classList.add("btn");
                button.onclick = () => verifierReponse(button, choix, currentQuestion.bonne_reponse, currentQuestion.source);
                optionsContainer.appendChild(button);
            });
        }

        // V√âRIFIER LA R√âPONSE
        function verifierReponse(selectedButton, selectedChoice, correctAnswer, source) {
            const allButtons = optionsContainer.querySelectorAll(".btn");
            allButtons.forEach(btn => btn.disabled = true);

            if (selectedChoice === correctAnswer) {
                selectedButton.classList.add("correct");
                feedbackTitle.innerText = "‚úÖ Bonne r√©ponse !";
                score++;
            } else {
                selectedButton.classList.add("incorrect");
                feedbackTitle.innerText = `‚ùå Mauvaise r√©ponse. La bonne r√©ponse √©tait : ${correctAnswer}`;
                allButtons.forEach(btn => {
                    if (btn.innerText === correctAnswer) {
                        btn.classList.add("correct");
                    }
                });
            }

            scoreDisplay.innerText = `Score : ${score} / ${currentQuestionIndex + 1}`;
            sourceText.innerHTML = `<strong>Source / Explication :</strong> ${source}`;
            feedbackSection.style.display = "block";
        }

        // PASSER √Ä LA QUESTION SUIVANTE
        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < currentQuestions.length) {
                loadQuestion();
            } else {
                questionTextElement.innerText = "üéâ Quiz termin√© !";
                optionsContainer.innerHTML = "";
                feedbackSection.style.display = "none";
                scoreDisplay.innerText = `Score final : ${score} / ${currentQuestions.length}`;
                homeBtn.style.display = "block"; // Affiche le bouton retour √† l'accueil
            }
        }

        // RETOURNER AU MENU PRINCIPAL
        function retourAccueil() {
            quizSection.style.display = "none";
            themeMenu.style.display = "block";
        }

        // D√©marrer l'application
        initThemes();
    </script>
</body>
</html>
