<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Islamique</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f7f6;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }
        #app-container {
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            max-width: 600px;
            width: 90%;
            text-align: center;
        }
        h1, h2 { color: #2c3e50; }
        
        .btn {
            display: block;
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            background-color: #ecf0f1;
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }
        .btn:hover { background-color: #dcdde1; }
        
        #theme-menu .btn {
            background-color: #34495e;
            color: white;
            border: none;
        }
        #theme-menu .btn:hover { background-color: #2c3e50; }

        #quiz-section { display: none; }
        
        #score-display { font-weight: bold; margin-bottom: 20px; color: #7f8c8d; }
        #question-text { font-size: 1.2em; margin-bottom: 20px; font-weight: bold; }
        
        .btn:disabled { cursor: not-allowed; opacity: 0.9; }
        .correct { background-color: #2ecc71 !important; color: white; border-color: #27ae60; }
        .incorrect { background-color: #e74c3c !important; color: white; border-color: #c0392b; }
        
        #feedback-section {
            display: none;
            margin-top: 20px;
            padding: 15px;
            background-color: #f1f2f6;
            border-left: 5px solid #2980b9;
            border-radius: 4px;
            text-align: left;
        }
        #source-text { font-style: italic; font-size: 0.95em; margin-top: 10px; color: #2c3e50; }
        
        #next-btn, #home-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #2980b9;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
        }
        #next-btn:hover, #home-btn:hover { background-color: #3498db; }
    </style>
</head>
<body>

    <div id="app-container">
        <h1>Quiz sur l'Islam</h1>
        
        <div id="theme-menu">
            <h2>Choisissez un th√®me</h2>
            <div id="theme-buttons"></div>
        </div>

        <div id="quiz-section">
            <h2 id="current-theme-title">Th√®me</h2>
            <div id="score-display">Score : 0 / 0</div>
            
            <div id="question-text">Chargement de la question...</div>
            <div id="options-container"></div>

            <div id="feedback-section">
                <strong id="feedback-title"></strong>
                <div id="source-text"></div>
                <button id="next-btn" onclick="nextQuestion()">Question suivante</button>
            </div>
            
            <button id="home-btn" style="display:none; width:100%;" onclick="retourAccueil()">Retour √† l'accueil</button>
        </div>
    </div>

    <script>
        const questionsDatabase = {
            "Le Coran": [
                {
                    "question": "Combien de sourates (chapitres) compte le Coran ?",
                    "choix": ["110", "112", "114", "120"],
                    "bonne_reponse": "114",
                    "source": "Consensus des savants (Ijma') sur la compilation du Mus'haf."
                },
                {
                    "question": "Quel ange a √©t√© charg√© de transmettre la r√©v√©lation au Proph√®te Muhammad (Ô∑∫) ?",
                    "choix": ["Mika'il (Michel)", "Jibril (Gabriel)", "Israfil", "Malik"],
                    "bonne_reponse": "Jibril (Gabriel)",
                    "source": "Coran, Sourate Al-Baqarah (2), verset 97."
                },
                {
                    "question": "Quelle sourate est appel√©e 'Le tiers du Coran' par le Proph√®te (Ô∑∫) ?",
                    "choix": ["Al-Fatiha", "Al-Ikhlas", "Al-Falaq", "An-Nas"],
                    "bonne_reponse": "Al-Ikhlas",
                    "source": "Hadith authentique : Sahih Al-Bukhari, n¬∞ 5013."
                },
                {
                    "question": "Quelle est la seule sourate du Coran qui ne commence pas par la formule 'Bismillah ar-Rahman ar-Rahim' ?",
                    "choix": ["Al-Anfal", "At-Tawbah (Le Repentir)", "Al-Kahf (La Caverne)", "Maryam"],
                    "bonne_reponse": "At-Tawbah (Le Repentir)",
                    "source": "Structure officielle du Coran (Mus'haf). Les savants expliquent qu'elle commence par un d√©saveu envers les polyth√©istes."
                },
                {
                    "question": "Quel compagnon a √©t√© charg√© par le calife Abu Bakr de compiler le Coran en un seul volume pour la premi√®re fois ?",
                    "choix": ["Ali ibn Abi Talib", "Uthman ibn Affan", "Zayd ibn Thabit", "Abdullah ibn Mas'ud"],
                    "bonne_reponse": "Zayd ibn Thabit",
                    "source": "Hadith authentique : Sahih Al-Bukhari, n¬∞ 4986."
                },
                {
                    "question": "Quel est le seul compagnon (Sahabi) dont le nom est explicitement mentionn√© dans le Coran ?",
                    "choix": ["Abu Bakr As-Siddiq", "Umar ibn Al-Khattab", "Zayd ibn Haritha", "Bilal ibn Rabah"],
                    "bonne_reponse": "Zayd ibn Haritha",
                    "source": "Coran, Sourate Al-Ahzab (33), verset 37."
                },
                {
                    "question": "Dans quelle sourate trouve-t-on DEUX FOIS la formule 'Bismillah ar-Rahman ar-Rahim' ?",
                    "choix": ["Al-Baqarah", "An-Naml (Les Fourmis)", "Yusuf", "Al-Mulk"],
                    "bonne_reponse": "An-Naml (Les Fourmis)",
                    "source": "Coran, Sourate An-Naml (27) : au d√©but de la sourate, et au verset 30 (dans la lettre de Souleyman/Salomon)."
                },
                {
                    "question": "D'apr√®s le Coran, pendant combien d'ann√©es le proph√®te Nuh (No√©) a-t-il pr√™ch√© son peuple avant le d√©luge ?",
                    "choix": ["950 ans", "300 ans", "1000 ans", "120 ans"],
                    "bonne_reponse": "950 ans",
                    "source": "Coran, Sourate Al-'Ankabut (29), verset 14 ('...mille ans moins cinquante ann√©es')."
                },
                {
                    "question": "Quelle est la plus longue sourate du Coran ?",
                    "choix": ["Al-Imran", "An-Nisa", "Al-Baqarah", "Al-Ma'idah"],
                    "bonne_reponse": "Al-Baqarah",
                    "source": "Consensus : Elle contient 286 versets."
                },
                {
                    "question": "Combien de proph√®tes sont nomm√©ment cit√©s dans le Coran ?",
                    "choix": ["25", "99", "313", "124 000"],
                    "bonne_reponse": "25",
                    "source": "Consensus des ex√©g√®tes bas√©s sur les textes coraniques (Adam, Nuh, Ibrahim, Musa, Isa, Muhammad, etc.)."
                }
            ],
            "La Vie du Proph√®te (Ô∑∫)": [
                {
                    "question": "Dans quelle ville est n√© le Proph√®te Muhammad (Ô∑∫) ?",
                    "choix": ["M√©dine", "La Mecque", "J√©rusalem", "Ta√´f"],
                    "bonne_reponse": "La Mecque",
                    "source": "Consensus historique et biographique (Sira)."
                }
            ],
            "Les Piliers de l'Islam": [
                {
                    "question": "Combien y a-t-il de piliers en Islam ?",
                    "choix": ["3", "4", "5", "6"],
                    "bonne_reponse": "5",
                    "source": "Hadith authentique (Hadith de Jibril) : Sahih Muslim n¬∞8."
                }
            ]
        };

        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;

        const themeMenu = document.getElementById("theme-menu");
        const themeButtonsContainer = document.getElementById("theme-buttons");
        const quizSection = document.getElementById("quiz-section");
        const currentThemeTitle = document.getElementById("current-theme-title");
        const questionTextElement = document.getElementById("question-text");
        const optionsContainer = document.getElementById("options-container");
        const feedbackSection = document.getElementById("feedback-section");
        const feedbackTitle = document.getElementById("feedback-title");
        const sourceText = document.getElementById("source-text");
        const scoreDisplay = document.getElementById("score-display");
        const nextBtn = document.getElementById("next-btn");
        const homeBtn = document.getElementById("home-btn");

        function initThemes() {
            themeButtonsContainer.innerHTML = "";
            for (const theme in questionsDatabase) {
                const btn = document.createElement("button");
                btn.classList.add("btn");
                btn.innerText = theme + " (" + questionsDatabase[theme].length + " questions)";
                btn.onclick = () => lancerQuiz(theme);
                themeButtonsContainer.appendChild(btn);
            }
        }

        function lancerQuiz(theme) {
            currentQuestions = questionsDatabase[theme];
            currentQuestionIndex = 0;
            score = 0;
            
            currentThemeTitle.innerText = "Th√®me : " + theme;
            themeMenu.style.display = "none";
            quizSection.style.display = "block";
            homeBtn.style.display = "none";
            
            loadQuestion();
        }

        function loadQuestion() {
            feedbackSection.style.display = "none";
            optionsContainer.innerHTML = "";
            nextBtn.style.display = "inline-block";
            
            const currentQuestion = currentQuestions[currentQuestionIndex];
            questionTextElement.innerText = currentQuestion.question;
            scoreDisplay.innerText = `Score : ${score} / ${currentQuestionIndex}`;

            currentQuestion.choix.forEach(choix => {
                const button = document.createElement("button");
                button.innerText = choix;
                button.classList.add("btn");
                button.onclick = () => verifierReponse(button, choix, currentQuestion.bonne_reponse, currentQuestion.source);
                optionsContainer.appendChild(button);
            });
        }

        function verifierReponse(selectedButton, selectedChoice, correctAnswer, source) {
            const allButtons = optionsContainer.querySelectorAll(".btn");
            allButtons.forEach(btn => btn.disabled = true);

            if (selectedChoice === correctAnswer) {
                selectedButton.classList.add("correct");
                feedbackTitle.innerText = "‚úÖ Bonne r√©ponse !";
                score++;
            } else {
                selectedButton.classList.add("incorrect");
                feedbackTitle.innerText = `‚ùå Mauvaise r√©ponse. La bonne r√©ponse √©tait : ${correctAnswer}`;
                allButtons.forEach(btn => {
                    if (btn.innerText === correctAnswer) {
                        btn.classList.add("correct");
                    }
                });
            }

            scoreDisplay.innerText = `Score : ${score} / ${currentQuestionIndex + 1}`;
            sourceText.innerHTML = `<strong>Source / Explication :</strong> ${source}`;
            feedbackSection.style.display = "block";
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < currentQuestions.length) {
                loadQuestion();
            } else {
                questionTextElement.innerText = "üéâ Quiz termin√© !";
                optionsContainer.innerHTML = "";
                feedbackSection.style.display = "none";
                scoreDisplay.innerText = `Score final : ${score} / ${currentQuestions.length}`;
                nextBtn.style.display = "none";
                homeBtn.style.display = "block";
            }
        }

        function retourAccueil() {
            quizSection.style.display = "none";
            themeMenu.style.display = "block";
            initThemes(); // Met √† jour le compteur de questions
        }

        initThemes();
    </script>
</body>
</html>
